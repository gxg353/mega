{% extends "console.html" %}
{% block subcontent %}
<div class="well well-sm">备份配置</div>

<div class="input-group">
<form class="navbar-form navbar-left" role="search" action="/console/backup/backup_config/" method="get">
        <div class="form-group">
          <input type="text" name="ip" class="form-control" placeholder="IP or NAME">
          <input type="text" name="port" class="form-control" placeholder="PORT">
        </div>        
      	<button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>
{% csrf_token %}
</form>
</div>
<div class="well well-sm">
<span class="label label-default">{{ instance.ip }}</span>
<span class="label label-default">{{ instance.port }}</span>
<span class="label label-default">{{ instance.db_type }}</span>
<hr>
<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
      	<th></th>
        <th>TOOL</th>
        <th>LEVEL</th>
        <th>VALUE</th>
        <th>TYPE</th>
        <th>NEED_DATA</th>
        <th>NEED_SHEMA</th>
       </tr>
    </thead>
    <tbody>
    	{% for config in config_list %}
    		<tr>
    			<td>
    				<span class="glyphicon glyphicon-hand-right"></span>
    			</td>
    			<td>{{ config.backup_tool }}</td>
    			<td>{{ config.backup_level }}</td>
    			<td>{{ config.level_value }}</td>
    			<td>{{ config.backup_type }}</td>
    			<td>{{ config.need_data }}</td>
    			<td>{{ config.need_shema }}</td>    			
    		</tr>
    {% endfor %}
    </tbody>
    </table>
</div>	
</div>
<br>
<div>
<div>
<button  class="btn btn-default btn" disabled="disabled" >
  		<span class=" glyphicon glyphicon-off" > {{ stat }}</span>
</button>
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="backup_tool" placeholder='BACKUP_TOOL' style="width:200px;" maxlength=20 value='{{ backup.backup_tool }}' readonly= 'readonly' >
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="backup_type" placeholder='BACKUP_TYPE' style="width:200px;" maxlength=20 value='{{ backup.backup_type }}' readonly= 'readonly' >
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="backup_level" placeholder='BACKUP_LEVEL' style="width:200px;" maxlength=20 value='{{ backup.backup_level }}' readonly= 'readonly' >
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="level_value" placeholder='LEVEL_VALUE' style="width:200px;" maxlength=20 value='{{ backup.level_value }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="need_data" placeholder='NEED_DATA' style="width:200px;" maxlength=20 value='{{ backup.need_data }}' readonly= 'readonly' >

  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="need_schema" placeholder='SCHEMA_ONLY' style="width:200px;" maxlength=20 value='{{ backup.need_schema }}' readonly= 'readonly' >
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="iscompressed" placeholder='ISCOMPRESSED' style="width:200px;" maxlength=20 value='{{ backup.iscompressed }}' readonly= 'readonly' >
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="isencrypted" placeholder='isencrypted' style="width:200px;" maxlength=20 value='{{ backup.isencrypted }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="retention" placeholder='RETENTION' style="width:200px;" maxlength=20 value='{{ backup.retention }}' readonly= 'readonly' >
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="cycle" placeholder='CYCLE' style="width:200px;" maxlength=20 value='{{ backup.cycle }}' readonly= 'readonly' >
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="backup_time" placeholder='BACKUP_TIME' style="width:200px;" maxlength=20 value='{{ backup.backup_time }}' readonly= 'readonly' >
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="schedule_time" placeholder='SCHEDULE_TIME' style="width:200px;" maxlength=20 value='{{ backup.schedule_time }}' readonly= 'readonly' >
</div>
<br>

<form action="/console/backup_config/" method="post">

<button type="button" class="btn btn-default btn" onclick="change_readonly('all')">
  		<span class="glyphicon glyphicon-wrench"></span>编辑
</button>
<button type="submit" class="btn btn-default btn" id='commit' disabled="disabled">
  		<span class="glyphicon glyphicon-ok"></span> 提交
</button>

{% csrf_token %}
</form>
</div>
<br>
<script>
function change_readonly(id){
	if (id == 'all')
	{
	    var arrAll=document.all;  
	    for (i=0;i <arrAll.length;i++)  
	    	arrAll[i].readOnly= false		
	}
	var btn_submit=document.getElementById("commit");  
    btn_submit.disabled='';
}
</script>






    {% endblock %}