{% extends "console.html" %}
{% block subcontent %}
<div class="well well-lg">备份配置</div>
<form action="/console/backup_config/" method="post">

<a>{{backup.ip}}1.1.1.1</a>
<a>{{backup.port}}3306</a>
<a>{{backup.db_type}}mysql</a>

<hr>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <select name="database_instance" class="form-control" style="width:200px;">
		{% for ist in instance_list %}
		   <option value={{ ist.id }}>{{ ist.ip }} : {{ ist.port }}</option>
		{% endfor %}
</select> 
  <input type="text" class="form-control" name="backup_tool" placeholder='BACKUP_TOOL' style="width:200px;" maxlength=20 value='{{ backup.backup_tool }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="backup_level" placeholder='BACKUP_LEVEL' style="width:200px;" maxlength=20 value='{{ backup.backup_level }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="level_value" placeholder='LEVEL_VALUE' style="width:200px;" maxlength=20 value='{{ backup.level_value }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="backup_type" placeholder='BACKUP_TYPE' style="width:200px;" maxlength=20 value='{{ backup.backup_type }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="need_data" placeholder='NEED_DATA' style="width:200px;" maxlength=20 value='{{ backup.need_data }}' readonly= 'readonly' >
</div>
<br>

<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="need_schema" placeholder='SCHEMA_ONLY' style="width:200px;" maxlength=20 value='{{ backup.need_schema }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="iscompressed" placeholder='ISCOMPRESSED' style="width:200px;" maxlength=20 value='{{ backup.iscompressed }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="isencrypted" placeholder='isencrypted' style="width:200px;" maxlength=20 value='{{ backup.isencrypted }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="retention" placeholder='RETENTION' style="width:200px;" maxlength=20 value='{{ backup.retention }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="is_schedule" placeholder='ISSCHEDULE' style="width:200px;" maxlength=20 value='{{ backup.is_schedule }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="cycle" placeholder='CYCLE' style="width:200px;" maxlength=20 value='{{ backup.cycle }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="backup_time" placeholder='BACKUP_TIME' style="width:200px;" maxlength=20 value='{{ backup.backup_time }}' readonly= 'readonly' >
</div>
<br>
<div class="input-group">
  <span class="input-group-addon">*</span>
  <input type="text" class="form-control" name="schedule_time" placeholder='SCHEDULE_TIME' style="width:200px;" maxlength=20 value='{{ backup.schedule_time }}' readonly= 'readonly' >
</div>
<br>


<button type="button" class="btn btn-default btn" onclick="change_readonly('all')">
  		<span class="glyphicon glyphicon-wrench"></span>编辑
</button>
<button type="submit" class="btn btn-default btn" id='commit' disabled="disabled">
  		<span class="glyphicon glyphicon-ok"></span> 提交
</button>

{% csrf_token %}
</form>
<br>
<form action="/resource/backup_detail/" method="post">
	<input type="hidden" name="backup_id" value='{{ backup.id }}' >
	<input type="hidden" name="type" value='del' >
	
	<button type="submit" class="btn btn-default btn">
  		<span class="glyphicon glyphicon-trash"></span> {{ stat_action }}线业务线
	</button>
	{% csrf_token %}
</form>
<script>
function change_readonly(id){
	if (id == 'all')
	{
	    var arrAll=document.all;  
	    for (i=0;i <arrAll.length;i++)  
	    	arrAll[i].readOnly= false		
	}
	var btn_submit=document.getElementById("commit");  
    btn_submit.disabled='';
}
</script>






    {% endblock %}