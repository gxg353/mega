{% extends "resource_base.html" %}
{% block subcontent %}
<div class="form-group">
<form action="/resource/instance_add/" method="get">
	<button type="submit" class="btn btn-default btn">
  		<span class="glyphicon glyphicon-plus"></span> Add
	</button>
	{% csrf_token %}
</form>
<form class="navbar-form navbar-left" role="search" action="/resource/instance/" method="post">
    <input type="text" name ='ip' class="form-control" placeholder="Search...">
  	<button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>
	{% csrf_token %}
</form>
</div>

<br>

<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
      	<th>NAME</th>
        <th>IP</th>
        <th>PORT</th>
        <th>ROLE</th>
        <th>LEVEL</th>
        <th>OWNER</th>
        <th>BUSINESS</th>
        <th>ONLINE</th>
        <th>STAT</th>
      </tr>
    </thead>
    <tbody>
       {% for instance in instance_list %}
	     <tr>
	     	<td><a href="/resource/instance_detail/?instance_id={{ instance.id }}">{{ instance.name }}</a></td>
			<td><a href="/resource/server_detail/?server_ip={{ instance.ip }}">{{ instance.ip }}</a></td>
			<td> {{ instance.port }} </td>
			<td> {% ifequal instance.role 1 %} 
					Master
				{% else %}
					Slave
				{% endifequal %}
			 </td>
			<td> {{ instance.level }} </td>
			<td><a href="/resource/user_detail/?user_id={{ instance.owner_id }}">{{ instance.owner }}</a></td>
			<td> {{ instance.business }}
			<td> {{ instance.online_date|date:"Y-m-d H:i:s" }} </td>
			<td>
			{% ifequal instance.stat 1 %} 
				<span style="color:green">Online</span>
			{% else %}
				<span style="color:red">Offline</span>
			{% endifequal %}
			  </td>
		</tr>
	   {% endfor %}
     </tbody>
  </table>
</div>
<ul class="pagination">
  <li><a href="?page=1">&laquo;</a></li>
  {% for page in page_range %}
  	<li><a href="?page={{ page }}">{{ page }}</a></li>
  {% endfor%}
  <li><a href="?page=1">&raquo;</a></li>
</ul>
{% endblock %}